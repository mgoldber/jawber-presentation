<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Mark n' Munch</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,700i" rel="stylesheet">
    <!-- Favicon -->
    <link rel="shortcut icon" href="https://storage.pardot.com/427982/227149/hackeryou_icon.png" />
    <!-- FontAwesome: -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
        integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
    <!-- header -->
    <header>
        <img src="http://assets.hackeryou.com/hackeryou-logo.svg" alt="HackerYou red square logo." class="logo">
        <img src="http://assets.hackeryou.com/hy-logo-text.svg" alt="HackerYou logo text: college of technology" class="logo-text">
    </header>

    <h1 class="head-text">Mark n' Munch - Making an API</h1>
    <main>
        <!-- side nav -->
        <aside>
            <nav>
                <ul>
                    <li>
                        <a href="#tools">Tools</a>
                    </li>
                    <li>
                        <a href="#why">Why Do It?</a>
                    </li>
                    <li>
                        <a href="#started">Getting Started</a>
                    </li>
                    <li>
                        <a href="#tools">Developing</a>
                    </li>
                    <li>
                        <a href="#gotchas">Gotchas</a>
                    </li>
                    <li>
                        <a href="#deployment">Deployment</a>
                    </li>
                    <li>
                        <a href="#updating">Updating</a>
                    </li>
                </ul>
            </nav>

        </aside><!-- side nav end -->

        <!-- main notes -->
        <div class="wrapper">

            <h2 class="heading">Welcome to Mark n' Munch</h2>

            <h3>We are going to learn about making your own API for teaching purposes</h3>

            <p>Our goal is to learn about building a scaleable and descriptive API that is accurately
            representative of APIs students may experience in the wild.</p>

            <!-- get starated section -->
            <section class="get-started" id="tools">
                <h2 class="heading">Tools</h2>
                <h3>NodeJS</h3>
                <p>Node allows us to run JavaScript on the server. Node allows us to
                    run our API, communicate with our database, and do everything build related.
                </p>

                <h3>MongoDB</h3>
                <p>This is a popular and great choice for your database since data is organized
                    into documents, and these documents very closely resemble JavaScript objects.
                </p>

                <h3>Mongoose</h3>
                <p>Mongoose is utilized for our connection between Node and MongoDB. In addition, within our
                    server file, mongoose is used to establish the connection to our database.
                </p>

                <h3>JWT</h3>
                <p>This is a module that we can use to generate a randomized token for us. It also gives us some
                    handy token validation methods.
                </p>

                <h3>Express</h3>
                <p>This allows us to simplify our routing, and provides immensely helpful methods to keep our HTTP
                    requests simplified and clean.
                </p>
            </section><!-- get started end -->

            <!-- Why Do It section -->
            <section class="why" id="why">
                <h2 class="heading" id="why">Why Do It?</h2>
                <h3>Control</h3>
                <p>Relying on other people's APIs when teaching is tough. If the API goes down, 
                    someone is having trouble getting their API key, or other problems arise, we
                    are at the mercy of the API.
                </p>
                <p>With our own API, we can simply generate back up tokens, respond faster if the 
                    API goes down, develop the API to meet our exact needs, and more!
                </p>

                <h3 id="repl">Style points</h3>
                <p>It makes us look cool.</p>

            </section><!-- Why Do It section end -->

            <!-- getting started section -->
            <section class="variables" id="started">
                <h2 class="heading">Getting Started</h2>
                <p>The hardest part is always getting started!</p>

                <p>I like to think about it by going through the whole flow of information from the front-end to the back-end.</p>

                <img src="assets/step1.jpg" alt="diagram of front end connecting to back end with link between react and node circled">

                <h5>Front - Login.js</h5>
                <img src="assets/axios_api_login_signup.png" alt="front-end call to users endpoint inside of try-catch block">

                


                <h3 id="declaration">Routes vs. Middleware vs. Utils</h3>
                <h4>Routes</h4>
                <p>This will hold the information specifying what happens when the endpoints of our API are hit.</p>

                <h5>Back - userRoutes.js</h5>
                <img src="assets/signup_route_userroutes.png" alt="signup route in userRoutes file">

                <h5></h5>

                <h4>Middleware</h4>
                <p>Middleware is where we can define actions that our application should run through. Middleware expects the layer to do some computation, augment parameters, and call `next` as a callback function.</p>
                <h4>Utils</h4>
                <p>This will hold our helper functions, as well as any constants that are required in our application.</p>

                <h3 id="declaration">Server.js</h3>
                <p>This is like the package.json file of the backend</p>
                <p>This serves as the entry point for our API. Within here, we will set up necessary configurations, link the necessary segments of our API, and start the server and connection to our database.</p>

                <p>TODO: SCREENSHOT HERE SHOWING THE FOLDER STRUCTURE OF API WITH SUBFOLDERS OF MIDDLEWARE, ROUTES, AND UTILS</p>

                <h3 id="declaration">Routes: Models, Routes, and Services</h3>
                <h4>Models</h4>
                <p>This is where we set up our schema. This maps to the way our information is stored in our database</p>
                <p>TODO: SCREENSHOT HERE OF THE USER SCHEMA FROM SHOPAROO</p>
                <p>TODO: POSSIBLY ALSO SCREENSHOT OF DATABASE DOCUMENT THAT MATCHES THIS SCHEMA</p>
                <h4>Routes</h4>
                <p>This will specify the logic that will happen when hitting different endpoints</p> 
                <p>TODO: SCREENSHOT OF /SIGNUP AND THE ROUTER IMPORT</p>
                <h4>Services</h4>
                <p>This will contain helper functions that we can use within our routes to perform important actions and reduce code repetition.</p>               
                <p>TODO: SCREENSHOT OF CREATEUSER FUNCTION IN SHOPAROO</p>
            </section><!--getting started section end-->

            <!-- types -->
            <section id="databases">
                <h2 class="heading">Databases</h2>
                <p>Thinking about database structure and how our collections relate will structure our code!</p>
                <p>For example, the cart can have multiple cart items in an online store</p>
                <p></p>
                <p></p>

                <h3 id="concatination">Database Relationships</h3>
                <p>Understanding how different collections relate to one another <span class="bold">+</span> operator!</p>

            </section><!-- end of types -->

            <!-- gotchas -->
            <section class="gotchas" id="gotchas">
                <h2 class="heading">Gotchas</h2>
                <p>The biggest gotcha I experienced was dealing with authentication with tokens and email verification.</p>
                <p>One verification token cannot be used to lock down.</p>
                <p>I had never completed any email validation before so figuring out that flow was super confusing for me.</p>
                
                <p>SCREENSHOT OF EMAIL VERIFICATION STUFF</p>
                <p></p>
                <p></p>

            </section><!--end of gotchas-->

            <!-- deployment section -->
            <section class="deployment" id="deployment">
                <h2 class="heading">Deployment</h2>
                <p>I found this part horrendously painful</p>
                <p>Used Digital Ocean for deployment which thankfully has some nice documentation</p>
                <p>Setting up Certbot was a wild time as well. Had never worked with certificates or https</p> 
            </section><!-- deployment end -->


            <!-- updating -->
            <section id="updating">
                <h2 class="heading">Updating</h2>
                <p>How do we make changes to the API once it has been deployed and if people are using it.</p>

                <h3>The flow</h3>
                <p>Have to get comfortable with SSH-ing to a remote server</p>
                <p>Made a separate user on the remotely deployed server. Called this user apiuser and has a clone of the code base. As a result, can pull the updated code from git.</p>
                <p>Had to learn a bit about pm2 which is a process manager that let's us run stuff</p>

                <h3>Certificate renewal process</h3>
                <p>Have to go through Certbot which offers the command of 'renew'</p>
                <p>Requires some familiarity with Nginx web server</p>


            </section><!--end of updating-->

            <section id="additional">
                <h3>Extra Resources</h3>
                <ol>
                    <li>Check out the new Full Stack code along -<a href="https://github.com/HackerYou/shoparoo" target="_blank"> Shoparoo</a> </li>
                    <li>Notes on deploying Node.js to an Ubuntu droplet <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-node-js-application-for-production-on-ubuntu-16-04" target="_blank">here</a></li>
                </ol>


                <h3>Thanks for lunching alongside the learning!</h3>
            </section>

        </div><!-- main notes end -->
    </main>
    <script src="script.js"></script>
</body>
</html>